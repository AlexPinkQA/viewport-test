<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Online Game with Viewport Measurement and Pseudo-Swipe</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden; /* Запобігає скролінгу, оскільки це гра */
            display: flex;
            flex-direction: column;
            height: 100vh;
        }
        header {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px;
            transition: padding 0.3s ease; /* Анімація для зменшення */
        }
        footer {
            background-color: #333;
            color: white;
            text-align: center;
            padding: 20px;
            transition: opacity 0.3s ease; /* Анімація для зникнення */
        }
        #game-canvas {
            flex: 1;
            width: 100%;
            background-color: #f0f0f0; /* Просто для візуалізації, замінити на Pixi canvas */
        }
        /* Клас для зменшеного хедера */
        .shrunk-header {
            padding: 10px;
        }
        /* Клас для прихованого футера */
        .hidden-footer {
            opacity: 0;
            pointer-events: none; /* Щоб не заважав взаємодії */
        }
    </style>
</head>
<body>
    <header id="header">Header (зменшується при свайпі)</header>
    <canvas id="game-canvas"></canvas> <!-- Тут буде ваш PixiJS canvas -->
    <footer id="footer">Footer (зникає при свайпі)</footer>

    <script>
        // Ініціалізація (для прикладу, припускаємо PixiJS вже підключено у вашому TS коді)
        // Тут просто placeholder для canvas. У вашій грі ініціалізуйте Pixi тут або імпортуйте.

        // Функція для вимірювання viewport розміру (працює в Safari iOS)
        function measureViewport() {
            const width = window.innerWidth;
            const height = window.innerHeight;
            console.log(`Viewport size: ${width}x${height}`);
            // Оновіть ваш Pixi canvas розмір тут, наприклад:
            // app.renderer.resize(width, height); // Якщо app - ваш Pixi Application
            return { width, height };
        }

        // Викликаємо при завантаженні та при resize (бо в Safari iOS висота змінюється при хованні адресної панелі)
        window.addEventListener('load', measureViewport);
        window.addEventListener('resize', measureViewport);

        // Функція псевдо-свайпа (використовуємо touch events для iOS)
        let touchStartY = 0;
        let touchEndY = 0;
        const header = document.getElementById('header');
        const footer = document.getElementById('footer');
        const swipeThreshold = 50; // Поріг свайпу в пікселях

        document.addEventListener('touchstart', (e) => {
            touchStartY = e.touches[0].clientY;
        });

        document.addEventListener('touchend', (e) => {
            touchEndY = e.changedTouches[0].clientY;
            const swipeDistance = touchStartY - touchEndY; // Позитивне - свайп вгору

            if (Math.abs(swipeDistance) > swipeThreshold) {
                if (swipeDistance > 0) { // Свайп вгору - ховаємо footer, зменшуємо header
                    footer.classList.add('hidden-footer');
                    header.classList.add('shrunk-header');
                } else { // Свайп вниз - показуємо назад (опціонально)
                    footer.classList.remove('hidden-footer');
                    header.classList.remove('shrunk-header');
                }
                // Оновлюємо viewport після змін (бо розміри екрану можуть змінитися)
                measureViewport();
            }
        });

        // Якщо потрібно імітувати скрол для ховання UI браузера в Safari (для full-screen)
        // Можна додати: window.scrollTo(0, 1); але в грі з overflow:hidden це може не працювати.
        // Альтернатива: зробити body height: calc(100vh + 1px); але тестувати.
    </script>
</body>
</html>
